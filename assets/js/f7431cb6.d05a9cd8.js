"use strict";(self.webpackChunkvirtualclient=self.webpackChunkvirtualclient||[]).push([[9946],{3097:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var a=t(5893),n=t(3905);const i={},o="Wrathmark",s={id:"workloads/wrathmark/wrathmark",title:"Wrathmark",description:"Wrathmark is an Othello program written by Rico Mariani for a project at Waterloo computer science course in 1987 to run on a VAX 780.",source:"@site/docs/workloads/wrathmark/wrathmark.md",sourceDirName:"workloads/wrathmark",slug:"/workloads/wrathmark/",permalink:"/VirtualClient/docs/workloads/wrathmark/",draft:!1,unlisted:!1,editUrl:"https://github.com/microsoft/VirtualClient/edit/main/website/docs/workloads/wrathmark/wrathmark.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Sysbench OLTP Workload Profiles",permalink:"/VirtualClient/docs/workloads/sysbench-oltp/sysbench-oltp-profiles"},next:{title:"Wrathmark Workload Profiles",permalink:"/VirtualClient/docs/workloads/wrathmark/wrathmark-profiles"}},l={},c=[{value:"What is Being Measured",id:"what-is-being-measured",level:2},{value:"Workload Metrics",id:"workload-metrics",level:2},{value:"Example Metrics",id:"example-metrics",level:3},{value:"Packaging and Setup",id:"packaging-and-setup",level:2}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.ah)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.h1,{id:"wrathmark",children:"Wrathmark"}),"\n",(0,a.jsx)(r.p,{children:"Wrathmark is an Othello program written by Rico Mariani for a project at Waterloo computer science course in 1987 to run on a VAX 780."}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.a,{href:"https://github.com/ricomariani/wrath-othello/tree/main",children:"Wrath-Othello GitHub"})}),"\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.a,{href:"https://ricomariani.medium.com/wrathmark-an-interesting-compute-workload-part-1-47d61e0bea43",children:"Wrathmark: An Interesting Compute Workload (Part 1)"})}),"\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.a,{href:"https://ricomariani.medium.com/wrathmark-an-interesting-compute-workload-part-2-bac27c7f0c7d",children:"Wrathmark: An Interesting Compute Workload (Part 2)"})}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"what-is-being-measured",children:"What is Being Measured"}),"\n",(0,a.jsx)(r.p,{children:"Wrathmark plays the game Othello, evaluating boards for an optimal move. The entire workload is just processing of in-memory data. In short, it's a good test of basic operations without being an arbitrary microbenchmark. It actually plays the game, so there is meaningfulness to its calculations. The benchmark result is completely deterministic, it evaluates exactly 1,474,559,545 boards every time. The same boards. And it allocates nothing except some fixed size stuff at startup, so there is zero GC overhead. The benchmark in managed code will allocate exactly one timer object dynamically during the run. It\u2019s quite fast so it can do the board evaluation in a few minutes."}),"\n",(0,a.jsxs)(r.p,{children:["There are different folders in the repository with varying methods of data storage and evaluation. The Virtual Client uses the folder ",(0,a.jsx)(r.code,{children:"wrath-sharp-std-arrays"}),", which uses ",(0,a.jsx)(r.code,{children:"byte[]"})," as the backing store for the game boards. The workload is deterministic loading state from ",(0,a.jsx)(r.code,{children:"endgame.txt"})," found in the root of the repository."]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{children:"- - B B - W - - \nB - B B B B - B \nB B W W W W B B \nB W B W W B W B \n- W W B B W W - \nW W W W W W W W \n- - - W B B - - \n- - W - B B - - \n\nb to play\n\nThis is an interesting endgame situation useful for benchmarking\n"})}),"\n",(0,a.jsx)(r.h2,{id:"workload-metrics",children:"Workload Metrics"}),"\n",(0,a.jsx)(r.p,{children:"A single metric is emitted by the benchmark captured by Virtual Client when running the Wrathmark workload."}),"\n",(0,a.jsx)(r.h3,{id:"example-metrics",children:"Example Metrics"}),"\n",(0,a.jsxs)(r.table,{children:[(0,a.jsx)(r.thead,{children:(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.th,{children:"Name"}),(0,a.jsx)(r.th,{children:"Example"})]})}),(0,a.jsx)(r.tbody,{children:(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"BoardsPerSecond"}),(0,a.jsx)(r.td,{children:"10920640"})]})})]}),"\n",(0,a.jsx)(r.p,{children:"The boards per second is calcualted from the timer's elapsed milliseconds and divided against the number of boards evaluated:"}),"\n",(0,a.jsxs)(r.p,{children:[(0,a.jsx)(r.code,{children:"BoardsPerSecond = boards / duration"}),"\n",(0,a.jsx)(r.a,{href:"https://github.com/ricomariani/wrath-othello/blob/de91c7ea4d2480101dfb1534861d762dde7fb6e3/wrath-sharp-std-arrays/WrathStdArrays.cs#L1138C1-L1146C25",children:"Code"})]}),"\n",(0,a.jsx)(r.h2,{id:"packaging-and-setup",children:"Packaging and Setup"}),"\n",(0,a.jsx)(r.p,{children:"Virtual client"}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsx)(r.li,{children:"Installs the DotNet SDK specified in the profile"}),"\n",(0,a.jsxs)(r.li,{children:["Clones the ",(0,a.jsx)(r.code,{children:"wrath-othello"})," GitHub repository from the manifest"]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"dotnet publish"})," the subdirectory specified in the profile (default ",(0,a.jsx)(r.code,{children:"wrath-sharp-std-arrays"}),")"]}),"\n",(0,a.jsxs)(r.li,{children:["Run the resulting wrath mark program loading the ",(0,a.jsx)(r.a,{href:"https://github.com/ricomariani/wrath-othello/blob/main/endgame.txt",children:(0,a.jsx)(r.code,{children:"endgame.txt"})})," game state"]}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{children:"wrath-sharp-std-arrays.exe xlt ..\\endgame.txt\n"})})]})}function h(e={}){const{wrapper:r}={...(0,n.ah)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},3905:(e,r,t)=>{t.d(r,{ah:()=>c});var a=t(7294);function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function s(e,r){if(null==e)return{};var t,a,n=function(e,r){if(null==e)return{};var t,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var l=a.createContext({}),c=function(e){var r=a.useContext(l),t=r;return e&&(t="function"==typeof e?e(r):o(o({},r),e)),t},d={inlineCode:"code",wrapper:function(e){var r=e.children;return a.createElement(a.Fragment,{},r)}},h=a.forwardRef((function(e,r){var t=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),m=c(t),u=n,p=m["".concat(l,".").concat(u)]||m[u]||d[u]||i;return t?a.createElement(p,o(o({ref:r},h),{},{components:t})):a.createElement(p,o({ref:r},h))}));h.displayName="MDXCreateElement"}}]);